<!DOCTYPE html>  
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <title>JRD</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style id="mkstylesheet">
body{-webkit-font-smoothing:antialiased;font-family:"Helvetica Neue",Helvetica,Arial,Verdana,sans-serif;margin:30px 0 0;padding:0;background:#fff}#wrapper{padding:20px}li{font-size:110%}li li{font-size:100%}li p{font-size:100%;margin:.5em 0}h1{color:#000}h2{color:#111}h3{color:#111;margin:0}h4{color:#111}h5{color:#111}h6{font-size:1em;line-height:1.5em;margin:1.5em 0}body,p,td,div{color:#111;font-family:"Helvetica Neue",Helvetica,Arial,Verdana,sans-serif;word-wrap:break-word}a{color:#0d6ea1;text-decoration:none;-webkit-transition:color .2s ease-in-out;-moz-transition:color .2s ease-in-out;-o-transition:color .2s ease-in-out;-ms-transition:color .2s ease-in-out;transition:color .2s ease-in-out}a:hover{color:#3593d9}body{font-size:15px;line-height:21px;margin:0 auto}h1{font-size:37px;line-height:42px;margin-top:42px;margin-bottom:21px}h2{font-size:27px;line-height:42px;margin-top:42px;margin-bottom:21px}h3{font-size:20px;line-height:21px;margin-top:21px;margin-bottom:21px}h4{font-size:20px;line-height:21px;margin-top:21px;margin-bottom:21px}p,ul,ol,pre,table,blockquote{margin-top:21px;margin-bottom:21px}hr{border:1px solid;margin:-1px 0}ul ul,ol ol,ul ol,ol ul{margin-top:0;margin-bottom:0}b,strong,em,small,code{line-height:1}.footnote{color:#0d6ea1;font-size:.8em;vertical-align:super}abbr,acronym{border-bottom:1px dotted #aaa}#wrapper img{max-width:100%;height:auto}dd{font-size:1em;margin-bottom:1em}li>p:first-child{margin:0}ul,ol{padding-left:1.5em}#wrapper ol{list-style-position:inside}ul ul,ul ol{margin-bottom:.4em}caption,col,colgroup,table,tbody,td,tfoot,th,thead,tr{border-spacing:0}table{border:1px solid rgba(0,0,0,0.25);border-collapse:collapse;display:table;empty-cells:hide;margin:-1px 0 1.3125em;padding:0;table-layout:fixed}caption{display:table-caption;font-weight:700}col{display:table-column}colgroup{display:table-column-group}tbody{display:table-row-group}tfoot{display:table-footer-group}thead{display:table-header-group}td,th{display:table-cell}tr{display:table-row}table th,table td{font-size:1.1em;line-height:1.3;padding:.5em 1em 0}table thead{background:rgba(0,0,0,0.15);border:1px solid rgba(0,0,0,0.15);border-bottom:1px solid rgba(0,0,0,0.2)}table tbody{background:rgba(0,0,0,0.05)}table tfoot{background:rgba(0,0,0,0.15);border:1px solid rgba(0,0,0,0.15);border-top:1px solid rgba(0,0,0,0.2)}figure{display:inline-block;overflow:hidden;position:relative;margin:1em 0 2em}figcaption{font-style:italic;text-align:center;background:white;color:#666}.poetry pre{display:block;font-family:Georgia,Garamond,serif !important;font-size:110% !important;font-style:italic;line-height:1.6em;margin-left:1em}.poetry pre code{font-family:Georgia,Garamond,serif !important;word-break:break-all;word-break:break-word;-webkit-hyphens:auto;-moz-hyphens:auto;hyphens:auto;white-space:pre-wrap}blockquote p{font-size:110%;font-style:italic;line-height:1.6em}sup,sub,a.footnote{font-size:1.4ex;height:0;line-height:1;position:relative;vertical-align:super}sub{vertical-align:sub;top:-1px}p,h5{font-size:1.1429em;line-height:1.3125em;margin:1.3125em 0}dt,th{font-weight:700}table tr:nth-child(odd),table th:nth-child(odd),table td:nth-child(odd){background:rgba(255,255,255,0.06)}table tr:nth-child(even),table td:nth-child(even){background:rgba(200,200,200,0.25)}@media print{img,table,figure{page-break-inside:avoid}#wrapper{background:#fff;color:#303030;padding:10px;position:relative;text-indent:0}}@media screen{.inverted{background:#252a2a}.inverted #wrapper{background:#252a2a;color:#eee}.inverted hr{border-color:#333f40 !important}.inverted p,.inverted td,.inverted li,.inverted h1,.inverted h2,.inverted h3,.inverted h4,.inverted h5,.inverted h6,.inverted th,.inverted .math,.inverted caption,.inverted dt,.inverted dd{color:#eee}.inverted pre{background:#ccc;color:#111}.inverted table{background:none}.inverted table tr:nth-child(odd),.inverted table td:nth-child(odd){background:none}.inverted a{color:#acd1d5}::selection{background:rgba(157,193,200,0.5)}h1::selection{background-color:rgba(45,156,208,0.3)}h2::selection{background-color:rgba(90,182,224,0.3)}h3::selection,h4::selection,h5::selection,h6::selection,li::selection,ol::selection{background-color:rgba(133,201,232,0.3)}code::selection{background-color:rgba(0,0,0,0.7);color:#eee}code span::selection{background-color:rgba(0,0,0,0.7) !important;color:#eee !important}a::selection{background-color:rgba(255,230,102,0.2)}.inverted a::selection{background-color:rgba(255,230,102,0.6)}td::selection,th::selection,caption::selection{background-color:rgba(180,237,95,0.5)}}
#mkreplaced-toc{list-style-position:inside;padding:0;margin:0 0 0 1rem;list-style-type:none}#mkreplaced-toc li::before{content:''}#mkreplaced-toc li{font-size:1rem;line-height:1.25;font-weight:normal}#mkreplaced-toc li ul{font-size:1.3rem;font-weight:300;padding:.5rem 0;margin:0 0 0 1rem}#mkreplaced-toc li.missing{list-style-type:none !important}#mkreplaced-toc.max-1 ul,#mkreplaced-toc.max1 ul{display:none}#mkreplaced-toc.max-2 ul ul,#mkreplaced-toc.max2 ul ul{display:none}#mkreplaced-toc.max-3 ul ul ul,#mkreplaced-toc.max3 ul ul ul{display:none}#mkreplaced-toc.max-4 ul ul ul ul,#mkreplaced-toc.max4 ul ul ul ul{display:none}#mkreplaced-toc.max-5 ul ul ul ul ul,#mkreplaced-toc.max5 ul ul ul ul ul{display:none}.rtl{direction:rtl;text-align:right}@media print{body{background:white;line-height:1.4}html,body,#wrapper{max-width:100%;width:100%;-webkit-text-size-adjust:none;-webkit-perspective:none !important;box-sizing:border-box;width:auto;border:0;margin:0;padding:0;float:none;-moz-box-shadow:none !important;-webkit-box-shadow:none !important;box-shadow:none !important}mark{background:transparent !important}h1,h2,h3,h4,h5,h6{page-break-after:avoid}p,h2,h3{orphans:3;widows:3}section{page-break-before:avoid}pre>code{white-space:pre;word-break:break-word}#generated-toc,#firstdiff,#toc-title,#mkdocumentprogress,#mkincludechart,#mkprogressbar1,#mkprogressbar2,.mkscrollmeter,#alllinks,.popup{display:none !important}.suppressprintlinks a{color:inherit !important;text-decoration:none !important;border-bottom:none !important;cursor:default !important}.hrefafterlinktext #wrapper a:link:after,.hrefafterlinktext #wrapper a:visited:after{content:" (" attr(href) ") ";font-size:90%;opacity:0.9}.nocodebreak pre{page-break-inside:avoid}img,table,figure{page-break-inside:avoid}.breakfootnotes .footnotes{page-break-before:always}.breakfootnotes .footnotes hr{display:none}#mktoctitle{display:block}#print-title{display:block;border-bottom:solid 1px #666}#wrapper pre{white-space:pre;white-space:pre-wrap;word-wrap:break-word}#wrapper #generated-toc-clone,#wrapper #mkreplaced-toc{display:block}.task-list .task-list-item{list-style-type:none !important}.task-list .gh-complete.task-list-item .task-list-item-checkbox:before{content:'\2713';background:#838387}.task-list .task-list-item-checkbox{-webkit-appearance:none;position:relative}.task-list .task-list-item-checkbox:before{content:' ';border:solid 1px #aaa;width:1em;height:1em;display:block;border-radius:2px;left:-20px;top:-.75em;color:white;font-weight:bold;line-height:1;text-align:center;position:absolute}}
#wrapper #generated-toc-clone,#wrapper #mkreplaced-toc,#wrapper #generated-toc-clone ul,#wrapper #mkreplaced-toc ul{list-style-position:inside}#wrapper #generated-toc-clone li.missing,#wrapper #mkreplaced-toc li.missing{list-style-type: none!important}#wrapper #generated-toc-clone,#wrapper #mkreplaced-toc{list-style-type: upper-roman}#wrapper #generated-toc-clone>li>ul,#wrapper #mkreplaced-toc>li>ul {list-style-type: decimal}#wrapper #generated-toc-clone>li>ul>li>ul,#wrapper #mkreplaced-toc>li>ul>li>ul{list-style-type: decimal-leading-zero}#wrapper #generated-toc-clone>li>ul>li>ul>li>ul,#wrapper #mkreplaced-toc>li>ul>li>ul>li>ul{list-style-type: lower-greek}#wrapper #generated-toc-clone>li>ul>li>ul>li>ul>li>ul,#wrapper #mkreplaced-toc>li>ul>li>ul>li>ul>li>ul{list-style-type: disc}#wrapper #generated-toc-clone>li>ul>li>ul>li>ul>li>ul>li>ul,#wrapper #mkreplaced-toc>li>ul>li>ul>li>ul>li>ul>li>ul{list-style-type: square}#wrapper #generated-toc-clone,#wrapper #mkreplaced-toc{list-style-position:outside!important;margin-left:2rem;}
</style>

<style id="mkprintstyles">@media print{#wrapper #generated-toc-clone,#generated-toc{display:none!important}
html,body,#wrapper{font-size:10pt!important}
}
</style>


</head>
<body class="normal">
  <div id="wrapper">
      <!-- Start of StatCounter Code for Default Guide -->
<script type="text/javascript">  
var sc_project=8924220;  
var sc_invisible=1;  
var sc_security="22994e8d";  
var scJsHost = (("https:" == document.location.protocol) ?  
"https://secure." : "http://www.");  
document.write("<sc"+"ript type='text/javascript' src='" +  
scJsHost+  
"statcounter.com/counter/counter.js'></"+"script>");  
</script>
<noscript><div class="statcounter"><a title="web analytics"  
href="http://statcounter.com/" target="_blank"><img  
class="statcounter"  
src="//c.statcounter.com/8924220/0/22994e8d/1/" alt="web  
analytics"></a></div></noscript>
<!-- End of StatCounter Code for Default Guide -->

<h1 id="jasonroderickdonaldson">Jason Roderick Donaldson</h1>

<h4 id="assistantprofessoroffinancewashingtonuniversityinstlouis">Assistant Professor of Finance, Washington University in St Louis</h4>

<h4 id="ceprresearchaffiliate">CEPR Research Affiliate</h4>

<p>j.r.donaldson@wustl.edu</p>

<figure>
<img src="img/jrd-picture.jpg" alt="" id="picture" />
</figure>

<h2 id="cvcv"><a href="http://jrdonaldson.com/stuff/DonaldsonCV.pdf">CV</a></h2>

<h2 id="research">Research</h2>
<!----

your comment goes here  
and here  
and here  
-->

<h4 id="housholddebtandunemploymenthhd"><a href="http://jrdonaldson.com/Papers/Donaldson-Piacentino-Thakor-Household_Debt.pdf">Houshold Debt and Unemployment</a></h4>

<p>with <a href="http://giorgiapiacentino.com/">Giorgia Piacentino</a> and <a href="http://apps.olin.wustl.edu/faculty/Thakor/index.htm">Anjan Thakor</a> (forthcoming at the JF)</p>

<p>We use a labor-search model to explain why the worst employment slumps often follow expansions of household debt. We find that households protected by limited liability suffer from a household-debt-overhang problem that leads them to require high wages to work. Firms respond by posting high wages but few vacancies. This <em>vacancy-posting effect</em> implies that high household debt leads to high unemployment. Even though households borrow from banks via bilaterally optimal contracts, the equilibrium level of household debt is inefficiently high due to a <em>household-debt externality</em>. We analyze the role that a financial regulator can play in mitigating this externality.</p>
<!----  
NB: the working paper version focused on household risk-shifting, rather than debt overhang.  It is retitled [Household Risk-shifting in the Labor Market] [BL].  
-->

<h4 id="contractingtocompeteforflowsm"><a href="http://jrdonaldson.com/Papers/Donaldson-Piacentino-Contracting_for_Flows.pdf">Contracting to Compete for Flows</a></h4>

<p>with <a href="http://giorgiapiacentino.com/">Giorgia Piacentino</a> (in JET 173)</p>

<p>We present a model in which asset managers design their contracts to attract flows of investor capital. We find that they make their contracts depend on public information, e.g. credit ratings or benchmark indices, as a way to attract flows, rather than as a way to mitigate incentive problems, as has been emphasized in the literature. Unfortunately, asset managers&#8217; competition for flows triggers a race to the bottom: asset managers use public information in their contracts even though it is socially inefficient. This inefficiency arises because contracting on public information prevents risk sharing. </p>

<h4 id="warehousebankingwb"><a href="http://jrdonaldson.com/Papers/Donaldson-Piacentino-Thakor-Warehouse_Banking.pdf">Warehouse Banking</a></h4>

<p>with <a href="http://giorgiapiacentino.com/">Giorgia Piacentino</a> and <a href="http://apps.olin.wustl.edu/faculty/Thakor/index.htm">Anjan Thakor</a> (accepted at the JFE)</p>

<p>We develop a theory of banking that explains why banks started out as commodities warehouses. We show that warehouses become banks because their superior storage technology allows them to enforce the repayment of loans most effectively. Further, interbank markets emerge endogenously to support this enforcement mechanism. Even though warehouses store deposits of real goods, they make loans by writing new &#8220;fake&#8221; warehouse receipts, rather than by taking deposits out of storage. Our theory helps to explain how modern banks create funding liquidity and why they combine warehousing (custody and deposit-taking), lending, and private money creation within the same institutions. It also casts light on a number of contemporary regulatory policies.</p>

<h4 id="resaleabledebtandsystemicriskn"><a href="http://jrdonaldson.com/Papers/Donaldson-Micheler-Resaleable_Debt.pdf">Resaleable Debt and Systemic Risk</a></h4>

<p>with <a href="http://www.lse.ac.uk/collections/law/staff/eva-micheler.htm">Eva Micheler</a> (in the JFE 127 3)</p>

<p>Many debt claims, such as bonds, are resaleable, whereas others, such as repos, are not. There was a fivefold increase in repo borrowing before the 2008 crisis. Why? Did banks&#8217; dependence on non-resaleable debt precipitate the crisis? In this paper, we develop a model of bank lending with credit frictions. The key feature of the model is that debt claims are heterogenous in their resaleability. We find that decreasing credit market frictions leads to an increase in borrowing via non-resaleable debt. Borrowing via non-resaleable debt has a dark side: it causes credit chains to form, since if a bank makes a loan via non-resaleable debt and needs liquidity, it cannot sell the loan but must borrow via a new contract. These credit chains are a source of systemic risk, since one bank&#8217;s default harms not only its creditors but also its creditors&#8217; creditors. Overall, our model suggests that reducing credit market frictions may have an adverse effect on the financial system and may even lead to the failures of financial institutions.</p>

<h4 id="theparadoxofpledgeabilityparadox"><a href="http://jrdonaldson.com/Papers/Donaldson-Gromb-Piacentino-Paradox.pdf">The Paradox of Pledgeability</a></h4>

<p>with <a href="http://denis.gromb.pagesperso-orange.fr">Denis Gromb</a> and <a href="http://giorgiapiacentino.com/">Giorgia Piacentino</a> (revise and resubmit at the JFE)</p>

<p>We develop a model in which collateral serves to protect creditors from the claims of other creditors. We find that, paradoxically, borrowers rely most on collateral when pledgeability is high, because this is when it is easy to take on new debt, which dilutes existing creditors. Creditors thus require collateral for protection against dilution&#8212;there is a &#8216;&#8216;collateral rat race.&#8217;&#8217; But collateralized borrowing has a cost: it encumbers assets, constraining future borrowing and investment&#8212;there is a &#8220;collateral overhang.&#8221; Our results suggest that policies aimed at increasing the supply of collateral may backfire, triggering an inefficient collateral rat race. Likewise, upholding the absolute priority of secured debt can exacerbate the rat race.</p>

<h4 id="intermediationvarietyiv"><a href="http://jrdonaldson.com/Papers/Donaldson-Piacentino-Thakor-Intermediation_Variety.pdf">Intermediation Variety</a></h4>

<p>with <a href="http://giorgiapiacentino.com/">Giorgia Piacentino</a> and <a href="http://apps.olin.wustl.edu/faculty/Thakor/index.htm">Anjan Thakor</a> (revise and resubmit at the JF)</p>

<p>We explain the endogenous emergence of a variety of lending intermediaries in a model based only on differences in their funding costs. Banks have a lower cost of capital than non-banks due to government safety nets. However, with only bank finance, entrepreneurs make inefficient project choices, forgoing innovative projects for traditional projects. Non-banks emerge to mitigate this inefficiency, using their high cost of capital as a commitment device not to fund traditional projects, thus inducing entrepreneurs to innovate efficiently. Despite earning high returns, non-banks never take over the entire market, but coexist with banks in general equilibrium.</p>

<h4 id="moneyrunsmr"><a href="http://jrdonaldson.com/Papers/Donaldson-Piacentino-Money_Runs.pdf">Money Runs</a></h4>

<p>with <a href="http://giorgiapiacentino.com/">Giorgia Piacentino</a> </p>

<p>We present a banking model in which bank debt circulates as &#8220;money&#8221; in decentralized secondary markets, like banknotes did in the nineteenth century and repos do today. We find that bank debt is susceptible to runs because secondary-market liquidity is subject to sudden, self-fulfilling dry-ups. When debt fails to circulate it is redeemed on demand in a &#8220;money run.&#8221; Even though demandable debt exposes banks to costly runs, banks still want to issue it. Indeed, to facilitate creating demandable money, banks in our model pool investments and transform maturity/liquidity&#8212;they endogenously do something that resembles real-world banking. Thus, the model suggests a raison d&#8217;etre for banking based on money creation alone.</p>

<h4 id="deadlockontheboarddl"><a href="http://jrdonaldson.com/Papers/Donaldson-Malenko-Piacentino-Deadlock.pdf">Deadlock on the Board</a></h4>

<p>with <a href="https://www2.bc.edu/nadya-malenko/">Nadya Malenko</a> and <a href="http://giorgiapiacentino.com/">Giorgia Piacentino</a> </p>

<p>We develop a dynamic model of board decision making. We show that directors may knowingly retain the policy they all think is the worst just because they fear they may disagree about what policy is best in the future&#8212;the fear of deadlock begets deadlock. Board diversity can exacerbate deadlock. Hence, shareholders may optimally appoint a biased director to avoid deadlock, whereas a CEO may appoint an independent director to create deadlock, and thus entrench himself. Our theory thus gives a new explanation for CEO entrenchment. It also gives a new perspective on director tenure, staggered boards, and short-termism.</p>

<h4 id="nettingn"><a href="http://jrdonaldson.com/Papers/Donaldson-Piacentino-Netting.pdf">Netting</a></h4>

<p>with <a href="http://giorgiapiacentino.com/">Giorgia Piacentino</a> </p>

<p>We present a model to explain why banks hold off-setting debts without netting them out. We find that off-setting debts help a bank to raise liquidity with new debt from a third party, since diluting old debt subsidizes the new debt. Even though a diluted bank is worse off ex post, a network of gross debts is stable ex ante. This is because it provides banks with valuable liquidity co-insurance, since each bank exercises its option to dilute when it needs liquidity most. However, the network harbors systemic risk: since one bank&#8217;s liabilities are other banks&#8217; assets, a liquidity shock can transmit through the network in a default cascade.</p>

<h4 id="procyclicalpromisespp"><a href="http://jrdonaldson.com/Papers/Donaldson-Procyclical_Promises.pdf">Procyclical Promises</a></h4>

<p>In this paper, I model a dynamic market economy in which debt contracts are subject to renegotiation. I find that a firm with more cyclical cash flows can borrow more than a firm with less cyclical cash flows, consistent with empirical evidence. The reason is that a firm with cyclical cash flows puts its creditors in a relatively strong bargaining position when debt is renegotiated. In general equilibrium, this leads to a collateral premium for assets that generate cyclical cash flows&#8212;they are expensive because they allow firms to borrow against them, scaling up their investments via leverage. Endogenous variation in enforcement frictions generates business cycle fluctuations in both firm-level and aggregate quantities consistent with stylized facts, even in the absence of capital accumulation or technology shocks.</p>

<h2 id="affiliations">Affiliations</h2>

<h4 id="ceprcepr"><a href="http://cepr.org">CEPR</a></h4>

<h4 id="systemicriskcentresrc"><a href="http://www.systemicrisk.ac.uk">Systemic Risk Centre</a></h4>

<h4 id="financetheorygroupftg"><a href="http://www.financetheory.org">Finance Theory Group</a></h4>

<h4 id="laborandfinancegrouplfg"><a href="https://sites.google.com/site/laborandfinancegroup/">Labor and Finance Group</a></h4>

<h2 id="otherstuff">Other Stuff</h2>

<h4 id="heroesh"><a href="http://jrdonaldson.com/stuff/Heroes/Heroes.html">Heroes</a></h4>

<h4 id="recommendedreadingrr"><a href="http://jrdonaldson.com/Recommended/A_Short_Path_to_the_Shortest_Path.pdf">Recommended Reading</a></h4>
<!---  
PAPERS  
-->
<!---  
PEOPLE  
-->
<!---  
AFFILIATIONS  
-->
<!---  
OTHER STUFF  
-->
<!---  
OLD STUFF  
-->
<!--- http://jrdonaldson.com/stuff/Mandates.pdf -->
<!-- ##END MARKED WRAPPER## -->
    </div>



<script>(function(factory){if(typeof define==="function"&&define.amd){define("bidi_helpers",[],factory)}else{window.bidi_helpers=factory()}})(function(){var module={};module.Dir={RTL:-1,UNKNOWN:0,LTR:1};module.Format={LRE:"\u202A",RLE:"\u202B",PDF:"\u202C",LRM:"\u200E",RLM:"\u200F"};module.ltrChars_="A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02B8\u0300-\u0590\u0800-\u1FFF\u2C00-\uFB1C\uFE00-\uFE6F\uFEFD-\uFFFF";module.rtlChars_="\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC";module.ltrDirCheckRe_=new RegExp("^[^"+module.rtlChars_+"]*["+module.ltrChars_+"]");module.ltrCharReg_=new RegExp("["+module.ltrChars_+"]");module.hasAnyLtr=function(text){return module.ltrCharReg_.test(text)};module.rtlDirCheckRe_=new RegExp("^[^"+module.ltrChars_+"]*["+module.rtlChars_+"]");module.rtlRe=module.rtlDirCheckRe_;module.isRtlText=function(text){return module.rtlDirCheckRe_.test(text)};module.isLtrText=function(text){return module.ltrDirCheckRe_.test(text)};module.isRequiredLtrRe_=/^http:\/\/.*/;module.hasNumeralsRe_=/\d/;module.estimateDirection=function(text,detectionThreshold){var rtlCount=0;var totalCount=0;var hasWeaklyLtr=false;var tokens=text.split(/\s+/);for(var i=0;i<tokens.length;i++){var token=tokens[i];if(module.isRtlText(token)){rtlCount++;totalCount++}else{if(module.isRequiredLtrRe_.test(token)){hasWeaklyLtr=true}else{if(module.hasAnyLtr(token)){totalCount++}else{if(module.hasNumeralsRe_.test(token)){hasWeaklyLtr=true}}}}}return totalCount==0?(hasWeaklyLtr?module.Dir.LTR:module.Dir.UNKNOWN):(rtlCount/totalCount>detectionThreshold?module.Dir.RTL:module.Dir.LTR)};return module});(function(factory){if(typeof define==="function"&&define.amd){define("bidiweb",["bidi_helpers"],factory)}else{window.bidiweb=factory(bidi_helpers)}})(function(bidi_helpers){var module={};var IProcessor={makeRtl:function(element){},makeLtr:function(element){}};var css_processor=function(classes){return{makeRtl:function(element){element.classList.add(classes.rtl)},makeLtr:function(element){element.classList.add(classes.ltr)}}};var style_processor=function(falign){return{makeRtl:function(element){element.style.direction="rtl";if(falign){element.style.textAlign="right"}},makeLtr:function(element){element.style.direction="ltr";if(falign){element.style.textAlign="left"}}}};module.processors={css:css_processor,style:style_processor};var nodeListMock=function(node){var list=[node];list.item=function(i){return list[i]};return list};module.process=function(query,processor){var elements;if(query instanceof NodeList){elements=query}else{if(query instanceof Node){elements=nodeListMock(query)}else{elements=document.querySelectorAll(query)}}module.process_elements(elements,processor);return elements};module.process_elements=function(elements,processor){for(var index=0;index<elements.length;index++){var element=elements.item(index);var text=element.textContent||element.value||element.placeholder||"";var dir=bidi_helpers.estimateDirection(text,0.4);if(dir==bidi_helpers.Dir.RTL){processor.makeRtl(element)}else{if(dir==bidi_helpers.Dir.LTR){processor.makeLtr(element)}}}};module.process_css=function(query,classes){var proc=module.processors.css(classes);return module.process(query,proc)};module.process_style=function(query,falign){var proc=module.processors.style(falign);return module.process(query,proc)};module.style=function(query){return module.process_style(query,true)};module.css=function(query){return module.process_css(query,{rtl:"rtl",ltr:"ltr"})};module.htmlToElement=function(html){var container=document.createElement("div");container.innerHTML=html;return container};module.html_css=function(html){var container=module.htmlToElement(html);var nodes=container.querySelectorAll("*");module.css(nodes);return container.innerHTML};module.html_style=function(html){var container=module.htmlToElement(html);var nodes=container.querySelectorAll("*");module.style(nodes);return container.innerHTML};return module});</script>

</body>
</html>